{% extends 'base.html' %}

{% block title %}Edit Alamat - Kaloriz{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0"><i class="fas fa-edit"></i> Edit Alamat Pengiriman</h5>
        </div>
        <div class="card-body">
          <form method="post">
            {% csrf_token %}

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Nama Lengkap *</label>
                  <input type="text" name="full_name" class="form-control" required
                         value="{{ address.full_name }}">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Nomor Telepon *</label>
                  <input type="tel" name="phone" class="form-control" required
                         value="{{ address.phone }}" placeholder="08xxxxxxxxxx">
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Provinsi *</label>
                  <input type="text" name="province" class="form-control"
                         value="{{ address.province }}" readonly>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Kota *</label>
                  <input type="text" name="city" class="form-control"
                         value="{{ address.city }}" readonly>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Kecamatan *</label>
                  <select name="district_id" class="form-control" required>
                    <option value="">Pilih Kecamatan...</option>
                    {% for district in districts %}
                    <option value="{{ district.id }}" {% if district.id == address.district.id %}selected{% endif %}>
                      {{ district.name }}
                    </option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Kode Pos *</label>
                  <input type="text" name="postal_code" class="form-control" required
                         value="{{ address.postal_code }}" placeholder="90xxx" maxlength="5">
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Nama Jalan / Gedung / No Rumah *</label>
              <input type="text" name="street_name" class="form-control" required
                     value="{{ address.street_name }}" placeholder="Contoh: Jl. A.P. Pettarani No. 123">
            </div>

            <div class="form-group">
              <label>Detail Lainnya</label>
              <textarea name="detail" class="form-control" rows="3"
                        placeholder="Contoh: Rumah cat hijau, dekat minimarket, RT 01 RW 02">{{ address.detail }}</textarea>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Tandai Sebagai *</label>
                  <select name="label" class="form-control" required>
                    <option value="Rumah" {% if address.label == "Rumah" %}selected{% endif %}>Rumah</option>
                    <option value="Kantor" {% if address.label == "Kantor" %}selected{% endif %}>Kantor</option>
                    <option value="Kos" {% if address.label == "Kos" %}selected{% endif %}>Kos</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="custom-control custom-checkbox mt-4 pt-2">
                  <input type="checkbox" name="is_default" class="custom-control-input" id="is_default"
                         {% if address.is_default %}checked{% endif %}>
                  <label class="custom-control-label" for="is_default">
                    Atur sebagai alamat utama
                  </label>
                </div>
              </div>
            </div>

            <hr>

            <div class="d-flex justify-content-between">
              <a href="{% url 'core:profile' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Kembali
              </a>
              <button type="submit" class="btn btn-success">
                <i class="fas fa-save"></i> Simpan Perubahan
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
