{% extends 'core/profile_base.html' %}

{% block profile_page_title %}Notifikasi - Kaloriz{% endblock %}

{% block extra_head %}
  {{ block.super }}
  <style>
    .notification-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .notification-card {
      background: #ffffff;
      border-radius: 18px;
      box-shadow: 0 12px 28px rgba(59, 68, 246, 0.08);
      padding: 20px 24px;
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }

    .notification-card.is-read {
      opacity: 0.8;
    }

    .notification-icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background: rgba(59, 68, 246, 0.12);
      color: #3B44F6;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      flex-shrink: 0;
    }

    .notification-content h5 {
      margin: 0 0 6px;
      font-weight: 700;
      color: #1f2559;
    }

    .notification-content p {
      margin: 0;
      color: #4a4f73;
      font-size: 0.95rem;
    }

    .notification-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 10px;
      font-size: 0.85rem;
      color: #7a80b4;
    }
  </style>
{% endblock %}

{% block profile_main %}
  <div class="profile-main-card">
    <div class="profile-main-header">
      <div>
        <h2>Pusat Notifikasi</h2>
        <p>Dapatkan pembaruan terbaru mengenai transaksi dan promo eksklusif.</p>
      </div>
    </div>

    {% if notifications %}
      <div class="notification-list">
        {% for notification in notifications %}
          <div class="notification-card {% if notification.is_read %}is-read{% endif %}">
            <div class="notification-icon">
              <i class="fas fa-bell"></i>
            </div>
            <div class="notification-content">
              <h5>{{ notification.title|default:'Pemberitahuan' }}</h5>
              <p>{{ notification.message|default:notification }}</p>
              <div class="notification-meta">
                <span><i class="far fa-clock"></i> {{ notification.created_at|date:'d M Y H:i'|default:'Baru saja' }}</span>
                {% if notification.category %}
                  <span><i class="fas fa-tag"></i> {{ notification.category }}</span>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="profile-empty-state">
        <i class="fas fa-bell"></i>
        <h4>Belum ada notifikasi</h4>
        <p>Kami akan mengirimkan informasi terbaru mengenai pesanan dan promo di sini.</p>
        <a href="{% url 'catalog:product_list' %}" class="btn btn-primary mt-3">
          <i class="fas fa-compass"></i> Jelajahi Produk
        </a>
      </div>
    {% endif %}
  </div>
{% endblock %}
